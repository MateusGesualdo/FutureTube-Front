(this["webpackJsonpfuture-foods-boilerplate"]=this["webpackJsonpfuture-foods-boilerplate"]||[]).push([[0],{163:function(e,t,a){e.exports=a.p+"static/media/background.c71a2ff0.png"},166:function(e,t,a){e.exports=a.p+"static/media/logo.c304a624.png"},249:function(e,t,a){e.exports=a(414)},414:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(23),l=a.n(r),i=a(26),c=a(15),s=a(161),d=a(28),u=a(17),g=a(162),h=a.n(g),p=a(99),m=Object(d.createMuiTheme)({palette:{type:"light",primary:{main:"#8b0000"},secondary:{main:"#ededed"}}}),b=a(22),E=a(67),v=a(18),O=a(20),f=a(19),j=a(163),w=a.n(j);function y(){const e=Object(v.a)(["\n    box-sizing: border-box;\n    min-height: 100vh;\n    background: url(",");\n"]);return y=function(){return e},e}const S=f.a.div(y(),w.a);var U=a(166),C=a.n(U),T=a(27),k=a.n(T);const x="https://93gwg8jly6.execute-api.us-east-1.amazonaws.com/v1",P=e=>({type:"STORE_LOGGED_USER",payload:{user:e}});const _=e=>t=>{const a={Authorization:e.token||""};k.a.post("".concat(x,"/users/login"),e,{headers:a}).then(e=>{window.localStorage.setItem("token",e.data.token),t(P(e.data.user)),t(Object(O.e)(ye.root))}).catch(e=>{console.log(e.message)})},I=e=>t=>{k.a.get("".concat(x,"/users/").concat(e)).then(e=>{t({type:"STORE_HIGHLIGHTED_USER",payload:{user:{id:e.data.user.id,name:e.data.user.name,profilePicture:e.data.user.profile_picture}}})}).catch(e=>{console.log(e.message)})};function D(){const e=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #ededed;\n  border-bottom: 1px solid lightgrey;\n  padding: 0.3em 1.3em;\n"]);return D=function(){return e},e}const V=f.a.div(D());var H=Object(c.c)(null,e=>({clearHighlightedUser:()=>e({type:"CLEAR_HIGHLIGHTED_USER"}),goHome:()=>e(Object(O.e)(ye.root))}))((function(e){return o.a.createElement(V,null,o.a.createElement("img",{src:C.a,width:"50",onClick:()=>{e.clearHighlightedUser(),e.goHome()},alt:"Future Tube"}),e.children)})),L=a(49),G=a.n(L),R=a(64),A=a.n(R),N=a(50),z=a.n(N);const B="https://93gwg8jly6.execute-api.us-east-1.amazonaws.com/v1";function M(e){return{type:"STORE_VIDEOS",payload:{videos:e}}}const X=e=>t=>{k.a.get("".concat(B,"/videos/all?page=").concat(e)).then(e=>{t(M(e.data.videos))}).catch(e=>{console.log(e.message)})},F=e=>t=>{k.a.get("".concat(B,"/videos?user=").concat(e)).then(e=>{t(M(e.data.videos)),t(Object(O.e)(ye.root))}).catch(e=>{console.log(e.message)})};function J(){const e=Object(v.a)(["\n  border-radius: 20px  \n"]);return J=function(){return e},e}const W=f.a.img(J());class q extends o.a.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})}}render(){const e=this.state.anchorEl;return o.a.createElement("div",null,o.a.createElement(G.a,{"aria-owns":e?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},o.a.createElement(W,{src:this.props.img,width:"30",alt:"Future Tube"})),o.a.createElement(A.a,{id:"simple-menu",anchorEl:e,open:Boolean(e),onClose:this.handleClose},o.a.createElement(z.a,{onClick:()=>{this.handleClose(),this.props.highlightUser(this.props.id),this.props.getUserUploads(this.props.id)}},"Meus v\xeddeos"),o.a.createElement(z.a,{onClick:()=>{this.handleClose(),this.props.goToChangePassword()}},"Trocar senha"),o.a.createElement(z.a,{onClick:()=>{this.handleClose(),this.props.logout()}},"Sair")))}}var $=Object(c.c)(e=>({id:e.users.logged.id}),e=>({getUserUploads:t=>e(F(t)),highlightUser:t=>e(I(t)),logout:()=>e(e=>{window.localStorage.clear(),e({type:"LOGOUT"})}),goToChangePassword:()=>e(Object(O.e)(ye.changePassword))}))(q);function K(){const e=Object(v.a)([" \n    border-radius: 15px;\n    margin: 15px 15px 0 0;\n"]);return K=function(){return e},e}function Q(){const e=Object(v.a)(["max-width:100%"]);return Q=function(){return e},e}function Y(){const e=Object(v.a)(["\n    margin: 15px 15px 0 0;\n"]);return Y=function(){return e},e}function Z(){const e=Object(v.a)(["\n    display: flex;       \n    align-items: flex-start;\n"]);return Z=function(){return e},e}function ee(){const e=Object(v.a)(["\n    box-sizing: border-box;\n    padding: 1em;\n    margin: 1em auto;\n    border-radius: 5px;\n    background-color: #8b000030;\n    max-width:800px\n"]);return ee=function(){return e},e}const te=f.a.div(ee()),ae=f.a.div(Z()),ne=f.a.h2(Y()),oe=f.a.video(Q()),re=f.a.img(K());function le(e){return o.a.createElement(te,null,o.a.createElement(oe,{id:e.id,src:e.src,width:e.width,controls:e.controls,autoplay:e.autoplay,onClick:e.onClick}),o.a.createElement(ae,null,e.profilePicture&&o.a.createElement(re,{src:e.profilePicture,width:"30",title:e.name,alt:"Future Tube",onClick:e.onPictureClick}),o.a.createElement("div",{id:e.id},o.a.createElement(ne,null,e.title),o.a.createElement("p",null,e.description),e.children)))}function ie(){const e=Object(v.a)(["\n   display: flex;\n   justify-content: space-between;\n   margin: 1em;\n"]);return ie=function(){return e},e}function ce(){const e=Object(v.a)(["\n   display: flex;\n   flex-wrap: wrap;\n   justify-content: space-evenly;\n"]);return ce=function(){return e},e}const se=f.a.div(ce()),de=f.a.div(ie());var ue=Object(c.c)(e=>({loggedUser:e.users.logged,highlightedUser:e.users.highlighted,videos:e.videos.list,currentPage:e.videos.currentPage}),e=>({goToLogin:()=>e(Object(O.e)(ye.login)),goToUploadVideo:()=>e(Object(O.e)(ye.uploadVideo)),login:t=>e(_(t)),getAllVideos:t=>e(X(t)),highlightVideo:t=>e((e=>t=>{k.a.get("".concat(B,"/videos/").concat(e)).then(e=>{t({type:"STORE_HIGHLIGHTED_VIDEO",payload:{video:{id:e.data.id,title:e.data.title,url:e.data.url,description:e.data.description,userId:e.data.user_id}}}),t(I(e.data.user_id)),t(Object(O.e)(ye.videoDetails))}).catch(e=>{console.log(e.message)})})(t)),deleteVideo:t=>e((e=>t=>{const a={Authorization:window.localStorage.getItem("token")};k.a.delete("".concat(B,"/videos/").concat(e),{headers:a}).then(()=>t(F(e))).catch(e=>alert(e.message))})(t)),changePage:t=>e((e=>t=>{t(X(e)),t((e=>({type:"UPDATE_PAGE_NUMBER",payload:{newPageNumber:e}}))(e))})(t))}))(e=>(o.a.useEffect(()=>{const t=window.localStorage.getItem("token");t&&e.login({token:t})},[e.highlightedUser.id]),o.a.useEffect(()=>{e.highlightedUser.id||e.getAllVideos(e.currentPage)},[e.highlightedUser.id]),o.a.createElement(S,null,o.a.createElement(H,null,e.loggedUser.id?o.a.createElement($,{img:e.loggedUser.profilePicture}):o.a.createElement(u.a,{color:"primary",onClick:e.goToLogin},"Entrar")),!e.highlightedUser.id&&o.a.createElement(de,null,o.a.createElement(u.a,{color:"primary",onClick:()=>e.changePage(e.currentPage-1)},"Anterior"),o.a.createElement(u.a,{color:"primary",onClick:()=>e.changePage(e.currentPage+1)},"Pr\xf3xima")),e.loggedUser.id&&e.loggedUser.id===e.highlightedUser.id&&o.a.createElement(u.a,{color:"primary",onClick:e.goToUploadVideo},"Adicionar V\xeddeo"),o.a.createElement(se,null,e.videos[0]&&e.videos.map(t=>o.a.createElement(le,{id:t.id,onClick:()=>e.highlightVideo(t.id),src:t.url,title:t.title,width:"300"},e.loggedUser.id&&e.loggedUser.id===e.highlightedUser.id&&o.a.createElement(u.a,{variant:"outlined",color:"primary",onClick:t=>e.deleteVideo(t.target.parentNode.parentNode.id)},"Deletar"))))))),ge=a(21),he=a(65),pe=a.n(he);function me(){const e=Object(v.a)(["\n    width: 300px;\n    margin: 1em auto;\n    display: grid;\n    grid-gap: 5px;\n    padding: 5px;\n    border-radius: 5px;\n    background-color: whitesmoke;\n"]);return me=function(){return e},e}const be=f.a.form(me()),Ee=e=>o.a.createElement(be,{onSubmit:e.onSubmit},e.fields.map(e=>o.a.createElement(pe.a,{required:!0,variant:"filled",type:e.type,label:e.label,pattern:e.pattern,value:e.value,onChange:e.onChange})),o.a.createElement(G.a,{type:"submit",color:"primary",variant:"contained"},e.buttonText));var ve=Object(c.c)(null,e=>({goHome:()=>e(Object(O.e)(ye.root)),goToSignup:()=>e(Object(O.e)(ye.signup)),login:t=>e(_(t))}))(e=>{const t=o.a.useState(),a=Object(ge.a)(t,2),n=a[0],r=a[1],l=o.a.useState(),i=Object(ge.a)(l,2),c=i[0],s=i[1];return o.a.createElement(S,null,o.a.createElement(H,null,o.a.createElement(u.a,{variant:"text",color:"primary",onClick:e.goToSignup},"Cadastre-se")),o.a.createElement(Ee,{onSubmit:t=>{t.preventDefault(),e.login({email:n,password:c})},buttonText:"Entrar",fields:[{label:"email",type:"email",value:n,onChange:e=>r(e.target.value)},{label:"senha",type:"password",value:c,onChange:e=>s(e.target.value)}]}))});var Oe=Object(c.c)(null,e=>({goHome:()=>e(Object(O.e)(ye.root)),signup:t=>e((e=>t=>{k.a.post("".concat(x,"/users/signup"),e).then(e=>{window.localStorage.setItem("token",e.data.token),t(P(e.data.user)),t(Object(O.e)(ye.root))}).catch(e=>{console.log(e.message)})})(t)),goBack:()=>e(Object(O.c)())}))(e=>{const t=o.a.useState(),a=Object(ge.a)(t,2),n=a[0],r=a[1],l=o.a.useState(),i=Object(ge.a)(l,2),c=i[0],s=i[1],d=o.a.useState(),g=Object(ge.a)(d,2),h=g[0],p=g[1],m=o.a.useState(),b=Object(ge.a)(m,2),E=b[0],v=b[1],O=o.a.useState(),f=Object(ge.a)(O,2),j=f[0],w=f[1];return o.a.createElement(S,null,o.a.createElement(H,null,o.a.createElement(u.a,{variant:"text",color:"primary",onClick:e.goBack},"Voltar")),o.a.createElement(Ee,{onSubmit:t=>{t.preventDefault(),e.signup({name:n,email:c,password:h,birthDate:E,profilePicture:j})},buttonText:"Criar Conta",fields:[{label:"nome",value:n,onChange:e=>r(e.target.value)},{label:"email",type:"email",value:c,onChange:e=>s(e.target.value)},{label:"senha",type:"password",value:h,onChange:e=>p(e.target.value)},{label:"data de nascimento",type:"date",value:E,onChange:e=>v(e.target.value)},{label:"foto de perfil",value:j,onChange:e=>w(e.target.value)}]}))});var fe=Object(c.c)(e=>({loggedUser:e.users.logged,highlightedUser:e.users.highlighted,highlightedVideo:e.videos.highlighted}),e=>({goToLogin:()=>e(Object(O.e)(ye.login)),goHome:()=>e(Object(O.e)(ye.root)),getUserUploads:t=>e(F(t))}))((function(e){return o.a.createElement(S,null,o.a.createElement(H,null,e.loggedUser.id?o.a.createElement($,{img:e.loggedUser.profilePicture}):o.a.createElement(u.a,{color:"primary",onClick:e.goToLogin},"Entrar")),o.a.createElement(le,{src:e.highlightedVideo.url,profilePicture:e.highlightedUser.profilePicture,name:e.highlightedUser.name,title:e.highlightedVideo.title,description:e.highlightedVideo.description,onPictureClick:()=>e.getUserUploads(e.highlightedVideo.userId),controls:!0,autoplay:!0}))}));var je=Object(c.c)(e=>({loggedUser:e.users.logged}),e=>({changePassword:(t,a)=>e(((e,t)=>a=>{const n={Authorization:window.localStorage.getItem("token")},o={currentPassword:e,newPassword:t};k.a.post("".concat(x,"/users/password"),o,{headers:n}).then(e=>{window.localStorage.setItem("token",e.data.token),alert(e.data.message)}).catch(e=>{console.log(e)})})(t,a)),goToLogin:()=>e(Object(O.e)(ye.login))}))((function(e){const t=o.a.useState(),a=Object(ge.a)(t,2),n=a[0],r=a[1],l=o.a.useState(),i=Object(ge.a)(l,2),c=i[0],s=i[1];return o.a.createElement(S,null,o.a.createElement(H,null,e.loggedUser.id?o.a.createElement($,{img:e.loggedUser.profilePicture}):o.a.createElement(u.a,{color:"primary",onClick:e.goToLogin},"Entrar")),o.a.createElement(Ee,{onSubmit:t=>{t.preventDefault(),e.changePassword(n,c)},buttonText:"Alterar Senha",fields:[{label:"Senha atual",type:"password",value:n,onChange:e=>r(e.target.value)},{label:"Nova senha",type:"password",value:c,onChange:e=>s(e.target.value)}]}))}));var we=Object(c.c)(e=>({loggedUser:e.users.logged}),e=>({uploadVideo:t=>{return e((a=t,e=>{const t={Authorization:window.localStorage.getItem("token")};k.a.post("".concat(B,"/videos/upload"),a,{headers:t}).then(t=>{e(Object(O.e)(ye.root)),alert(t.message)}).catch(e=>{alert(e.message)})}));var a},goToLogin:()=>e(Object(O.e)(ye.login))}))((function(e){const t=o.a.useState(),a=Object(ge.a)(t,2),n=a[0],r=a[1],l=o.a.useState(),i=Object(ge.a)(l,2),c=i[0],s=i[1],d=o.a.useState(),g=Object(ge.a)(d,2),h=g[0],p=g[1];return o.a.createElement(S,null,o.a.createElement(H,null,e.loggedUser.id?o.a.createElement($,{img:e.loggedUser.profilePicture}):o.a.createElement(u.a,{color:"primary",onClick:e.goToLogin},"Entrar")),o.a.createElement(Ee,{onSubmit:t=>{t.preventDefault(),e.uploadVideo({title:n,description:c,url:h})},buttonText:"Salvar",fields:[{label:"T\xedtulo",value:n,onChange:e=>r(e.target.value)},{label:"Descri\xe7\xe3o",value:c,onChange:e=>s(e.target.value)},{label:"Url",value:h,onChange:e=>p(e.target.value)}]}))}));const ye={root:"/",login:"/users/login",signup:"/users/signup",videoDetails:"/videos/watch",changePassword:"/users/password",uploadVideo:"/videos/upload"};var Se=function(e){return o.a.createElement(b.a,{history:e.history},o.a.createElement(E.c,null,o.a.createElement(E.a,{exact:!0,path:ye.root,component:ue}),o.a.createElement(E.a,{exact:!0,path:ye.login,component:ve}),o.a.createElement(E.a,{exact:!0,path:ye.signup,component:Oe}),o.a.createElement(E.a,{exact:!0,path:ye.videoDetails,component:fe}),o.a.createElement(E.a,{exact:!0,path:ye.changePassword,component:je}),o.a.createElement(E.a,{exact:!0,path:ye.uploadVideo,component:we})))},Ue=a(31),Ce=a(36);const Te={logged:{id:"",name:"",profilePicture:""},highlighted:{id:"",name:"",profilePicture:""}};function ke(e=Te,t){switch(t.type){case"STORE_LOGGED_USER":return Object(i.a)({},e,{logged:t.payload.user});case"STORE_HIGHLIGHTED_USER":return Object(i.a)({},e,{highlighted:t.payload.user});case"LOGOUT":return Object(i.a)({},e,{logged:{id:"",name:"",profilePicture:""}});case"CLEAR_HIGHLIGHTED_USER":return Object(i.a)({},e,{highlighted:{id:"",name:"",profilePicture:""}});default:return e}}const xe={list:[],highlighted:{id:"",title:"",url:"",description:"",userId:""},currentPage:1};function Pe(e=xe,t){switch(t.type){case"STORE_VIDEOS":return Object(i.a)({},e,{list:t.payload.videos});case"STORE_HIGHLIGHTED_VIDEO":return Object(i.a)({},e,{highlighted:t.payload.video});case"UPDATE_PAGE_NUMBER":return Object(i.a)({},e,{currentPage:t.payload.newPageNumber});default:return e}}var _e=a(159);const Ie=Object(d.createGenerateClassName)(),De=Object(p.create)(Object(i.a)({},Object(d.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),Ve=Object(Ue.a)(),He=[Object(Ce.a)(Object(_e.a)(Ve),s.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():e=>e],Le=Object(Ce.e)((Ge=Ve,Object(Ce.c)({router:Object(b.b)(Ge),users:ke,videos:Pe})),Object(Ce.d)(...He));var Ge;var Re=()=>o.a.createElement(c.a,{store:Le},o.a.createElement(h.a,{jss:De,generateClassName:Ie},o.a.createElement(d.MuiThemeProvider,{theme:m},o.a.createElement(u.b,null),o.a.createElement(Se,{history:Ve}))));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[249,1,2]]]);
//# sourceMappingURL=main.0dd53b09.chunk.js.map